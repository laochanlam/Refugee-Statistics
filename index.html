<!DOCTYPE HTML>
<!--
	Tessellate by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>機率與統計 final project</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<section id="header" class="dark">
				<header>
					<h1>難民議題─資料視覺化</h1>
					<p>資訊 108 洪得揚 劉俊林</p>
				</header>
				<footer>
					<a href="#first" class="button scrolly">Next Page</a>
				</footer>
			</section>

		<!-- First -->
			<section id="first" class="main">
				<header>
					<div class="container">
						<h2>前情提要</h2>
						<p>
廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文廢文
						</p>
					</div>
				</header>
				<div class="content dark style1 featured">
					<div class="container">
						<div class="row">
							<div class="4u 12u(narrow)">
								<section>
									<span class="feature-icon"><span class="icon fa-clock-o"></span></span>
									<header>
										<h3>PROTECTION</h3>
									</header>
									<p>
										保護廢文
									</p>
								</section>
							</div>
							<div class="4u 12u(narrow)">
								<section>
									<span class="feature-icon"><span class="icon fa-bolt"></span></span>
									<header>
										<h3>FOOD SECURITY</h3>
									</header>
									<p>
										食物廢文
									</p>
								</section>
							</div>
							<div class="4u 12u(narrow)">
								<section>
									<span class="feature-icon"><span class="icon fa-cloud"></span></span>
									<header>
										<h3>EDUCATION</h3>
									</header>
									<p>
										教育廢文
									</p>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="12u">
								<footer>
									<a href="#second" class="button scrolly">Next Page</a>
								</footer>
							</div>
						</div>
					</div>
				</div>
			</section>

		<!-- Second -->
			<section id="second" class="main">
				<header>
					<div class="container">
						<h2>讓我們先用項目做區分</h2>
						<p>
							項目廢文
						</p>
					</div>
				</header>
				<div class="content dark style2">
					<div class="container">
						<div class="row">
							<div class="4u 12u(narrow)">
								<section>
									<h3>項目啦</h3>
									<p>
										項目廢文
									</p>
									<footer>
										<a href="#third" class="button scrolly">Accumsan nisi tempor</a>
									</footer>
								</section>
							</div>
							<div class="8u 12u(narrow)">
								<div class="row">
									<div class="6u"><a href="#" class="image fit"><img src="images/pic01.jpg" alt="" /></a></div>
									<div class="6u"><a href="#" class="image fit"><img src="images/pic02.jpg" alt="" /></a></div>
									<div class="6u"><a href="#" class="image fit"><img src="images/pic03.jpg" alt="" /></a></div>
									<div class="6u"><a href="#" class="image fit"><img src="images/pic04.jpg" alt="" /></a></div>
									<div class="6u"><a href="#" class="image fit"><img src="images/pic05.jpg" alt="" /></a></div>
									<div class="6u"><a href="#" class="image fit"><img src="images/pic06.jpg" alt="" /></a></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

		<!-- Third -->
			<section id="third" class="main">
				<header>
					<div class="container">
						<h2>再來用國家做區分</h2>
						<p>
							國家廢文
						</p>
					</div>
				</header>
				 <!--style="border: 3px solid red;-->
				<div class="content dark style3">
					<div class="container">
								<div style="text-align: center;">
									<iframe style="margin: -15% 0% auto;" src="https://widgets.cloudstitch.com/etc276/d3-bubble-chart/standalone" width="1000" height="700"
									 scrolling="no" ></iframe>
								</div>
						<div class="row">
							<div class="4u 12u(narrow)">
								<h3>國家啦</h3>
								<p>
									國家廢文1
								</p>
							</div>
							<div class="4u 12u(narrow)">
								<p>
									國家廢文2
								</p>	
							</div>
							<div class="4u 12u(narrow)">
								<p>
									國家廢文3
								</p>
								<footer>
									<a href="#fourth" class="button scrolly">Next Page</a>
								</footer>
							</div>
						</div>
					</div>
				</div>
			</section>

		<!-- Basic Elements -->
<!--		
			<section class=" ">
				<header>
					<div class="container">
						<h2>A Whole Lotta Elements</h2>
						<p>General purpose elements for every general purpose. Or something like that.</p>
					</div>
				</header>
				<div class="content style1 dark">
					<div class="container">
						<section>
							<header>
								<h3>Paragraph</h3>
								<p>This is a byline</p>
							</header>
							<p>Phasellus nisl nisl, varius id <sup>porttitor sed pellentesque</sup> ac orci. Pellentesque
							habitant <strong>strong</strong> tristique <b>bold</b> et netus <i>italic</i> malesuada <em>emphasized</em> ac turpis egestas. Morbi
							leo suscipit ut. Praesent <sub>id turpis vitae</sub> turpis pretium ultricies. Vestibulum sit
							amet risus elit.</p>
						</section>
						<section>
							<header>
								<h3>Blockquote</h3>
							</header>
							<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget.
							tempus euismod. Vestibulum ante ipsum primis in faucibus. Cras sit amet urna eros, id egestas
							tempus ante ipsum primis in faucibus orci luctus et ultrices.</blockquote>
						</section>
						<section>
							<header>
								<h3>Divider</h3>
							</header>
							<p>Donec consectetur <a href="#">vestibulum dolor et pulvinar</a>. Etiam vel felis enim, at viverra
							ligula. Ut porttitor sagittis lorem, quis eleifend nisi ornare vel. Praesent nec orci
							facilisis leo magna. Cras sit amet urna eros, id egestas urna. Quisque aliquam
							tempus euismod. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
							posuere cubilia.</p>
							<hr />
							<p>Donec consectetur vestibulum dolor et pulvinar. Etiam vel felis enim, at viverra
							ligula. Ut porttitor sagittis lorem, quis eleifend nisi ornare vel. Praesent nec orci
							facilisis leo magna. Cras sit amet urna eros, id egestas urna. Quisque aliquam
							tempus euismod. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
							posuere cubilia.</p>
						</section>
						<section>
							<header>
								<h3>Unordered List</h3>
							</header>
							<ul class="default">
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
							</ul>
						</section>
						<section>
							<header>
								<h3>Ordered List</h3>
							</header>
							<ol class="default">
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
								<li>Donec consectetur vestibulum dolor et vel felis enim at viverra ligula. Ut porttitor sagittis lorem.</li>
							</ol>
						</section>
						<section>
							<header>
								<h3>Table</h3>
							</header>
							<div class="table-wrapper">
								<table class="default">
									<thead>
										<tr>
											<th>ID</th>
											<th>Name</th>
											<th>Description</th>
											<th>Price</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>00001</td>
											<td>Lorem ipsum dolor</td>
											<td>Ut porttitor sagittis lorem quis nisi ornare.</td>
											<td>29.99</td>
										</tr>
										<tr>
											<td>00002</td>
											<td>Sit amet nullam</td>
											<td>Ut porttitor sagittis lorem quis nisi ornare.</td>
											<td>19.99</td>
										</tr>
										<tr>
											<td>00003</td>
											<td>Feugiat felis viverra</td>
											<td>Ut porttitor sagittis lorem quis nisi ornare.</td>
											<td>29.99</td>
										</tr>
										<tr>
											<td>00004</td>
											<td>Sagittis enim felis</td>
											<td>Ut porttitor sagittis lorem quis nisi ornare.</td>
											<td>19.99</td>
										</tr>
										<tr>
											<td>00005</td>
											<td>Nullam sed vestibulum</td>
											<td>Ut porttitor sagittis lorem quis nisi ornare.</td>
											<td>19.99</td>
										</tr>
									</tbody>
									<tfoot>
										<tr>
											<td colspan="3"></td>
											<td>100.00</td>
										</tr>
									</tfoot>
								</table>
							</div>
						</section>
						<section>
							<header>
								<h3>Form</h3>
							</header>
							<form method="post" action="#">
								<div class="row 50%">
									<div class="6u 12u(narrow)">
										<input type="text" name="name" id="name" value="" placeholder="John Doe" />
									</div>
									<div class="6u 12u(narrow)">
										<input type="text" name="email" id="email" value="" placeholder="johndoe@domain.tld" />
									</div>
								</div>
								<div class="row 50%">
									<div class="12u">
										<div class="select" tabindex="-1">
											<select name="department" id="department">
												<option value="">Choose a department</option>
												<option value="1">Manufacturing</option>
												<option value="2">Administration</option>
												<option value="3">Support</option>
											</select>
										</div>
									</div>
								</div>
								<div class="row 50%">
									<div class="12u">
										<input type="text" name="subject" id="subject" value="" placeholder="Enter your subject" />
									</div>
								</div>
								<div class="row 50%">
									<div class="12u">
										<textarea name="message" id="message" placeholder="Enter your message"></textarea>
									</div>
								</div>
								<div class="row">
									<div class="12u">
										<ul class="actions">
											<li><input type="submit" class="button" value="Send Message" /></li>
											<li><input type="reset" class="button alt" value="Clear Form" /></li>
										</ul>
									</div>
								</div>
							</form>
						</section>
					</div>
				</div>
			</section>
		-->
		
		<!--<div style="text-align: center;">
			<iframe style="margin: auto;" src="https://widgets.cloudstitch.com/etc276/d3-bubble-chart/standalone" width="1000" height="700" scrolling="no"></iframe>
		</div>-->

<!-- D3.JS -->
			<section id="fourth" class="main">
				<header>
					<div class="container">
						<h2>Sed feugiat ipsum consequat</h2>
						<p>Gravida dis placerat lectus ante vel nunc euismod eget ornare varius gravida euismod lorem ipsum dolor sit amet consequat<br />
						feugiat. Gravida dis placerat lectus ante vel nunc euismod eget ornare varius gravida euismod lorem ipsum dolor sit amet.</p>
					</div>
				</header>
				<div class="content style4 featured">
					<div class="container 75%">


							<style>

							.hexagon {
								stroke: #000;
								stroke-width: 0.5px;
							}

							</style>
							<svg width="960" height="500"></svg>
							<script src="https://d3js.org/d3.v4.min.js"></script>
							<script src="https://d3js.org/d3-hexbin.v0.2.min.js"></script>
							<script>

							var svg = d3.select("svg"),
									margin = {top: 20, right: 20, bottom: 30, left: 40},
									width = +svg.attr("width") - margin.left - margin.right,
									height = +svg.attr("height") - margin.top - margin.bottom,
									g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

							var randomX = d3.randomNormal(width / 2, 80),
									randomY = d3.randomNormal(height / 2, 80),
									points = d3.range(2000).map(function() { return [randomX(), randomY()]; });

							var color = d3.scaleSequential(d3.interpolateLab("white", "steelblue"))
									.domain([0, 20]);

							var hexbin = d3.hexbin()
									.radius(20)
									.extent([[0, 0], [width, height]]);

							var x = d3.scaleLinear()
									.domain([0, width])
									.range([0, width]);

							var y = d3.scaleLinear()
									.domain([0, height])
									.range([height, 0]);

							g.append("clipPath")
									.attr("id", "clip")
								.append("rect")
									.attr("width", width)
									.attr("height", height);

							g.append("g")
									.attr("class", "hexagon")
									.attr("clip-path", "url(#clip)")
								.selectAll("path")
								.data(hexbin(points))
								.enter().append("path")
									.attr("d", hexbin.hexagon())
									.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
									.attr("fill", function(d) { return color(d.length); });

							g.append("g")
									.attr("class", "axis axis--y")
									.call(d3.axisLeft(y).tickSizeOuter(-width));

							g.append("g")
									.attr("class", "axis axis--x")
									.attr("transform", "translate(0," + height + ")")
									.call(d3.axisBottom(x).tickSizeOuter(-height));

							</script>
<!-- D3.JS -->


<!-- D3.JS Graph -->
<style>


	path {
		stroke: #fff;
	}

	path:hover {
		opacity: 0.9;
	}

	rect:hover {
		fill: blue;
	}

	.axis {
		font: 10px sans-serif;
	}

	.legend tr {
		border-bottom: 1px solid grey;
	}

	.legend tr:first-child {
		border-top: 1px solid grey;
	}

	.axis path,
	.axis line {
		fill: none;
		stroke: #000;
		shape-rendering: crispEdges;
	}

	.x.axis path {
		display: none;
	}

	.legend {
		margin-bottom: 76px;
		display: inline-block;
		border-collapse: collapse;
		border-spacing: 0px;
	}

	.legend td {
		padding: 4px 5px;
		vertical-align: bottom;
	}

	.legendFreq,
	.legendPerc {
		align: right;
		width: 50px;
	}
</style>
				<div id='dashboard'>
				</div>
				
				<script src="http://d3js.org/d3.v3.min.js"></script>
				<script>
							function dashboard(id, fData) {
								var barColor = 'steelblue';
								function segColor(c) { return { low: "#807dba", mid: "#e08214", high: "#41ab5d" }[c]; }

								// compute total for each state.
								fData.forEach(function (d) { d.total = d.freq.low + d.freq.mid + d.freq.high; });

								// function to handle histogram.
								function histoGram(fD) {
									var hG = {}, hGDim = { t: 60, r: 0, b: 30, l: 0 };
									hGDim.w = 500 - hGDim.l - hGDim.r,
										hGDim.h = 300 - hGDim.t - hGDim.b;

									//create svg for histogram.
									var hGsvg = d3.select(id).append("svg")
										.attr("width", hGDim.w + hGDim.l + hGDim.r)
										.attr("height", hGDim.h + hGDim.t + hGDim.b).append("g")
										.attr("transform", "translate(" + hGDim.l + "," + hGDim.t + ")");

									// create function for x-axis mapping.
									var x = d3.scale.ordinal().rangeRoundBands([0, hGDim.w], 0.1)
										.domain(fD.map(function (d) { return d[0]; }));

									// Add x-axis to the histogram svg.
									hGsvg.append("g").attr("class", "x axis")
										.attr("transform", "translate(0," + hGDim.h + ")")
										.call(d3.svg.axis().scale(x).orient("bottom"));

									// Create function for y-axis map.
									var y = d3.scale.linear().range([hGDim.h, 0])
										.domain([0, d3.max(fD, function (d) { return d[1]; })]);

									// Create bars for histogram to contain rectangles and freq labels.
									var bars = hGsvg.selectAll(".bar").data(fD).enter()
										.append("g").attr("class", "bar");

									//create the rectangles.
									bars.append("rect")
										.attr("x", function (d) { return x(d[0]); })
										.attr("y", function (d) { return y(d[1]); })
										.attr("width", x.rangeBand())
										.attr("height", function (d) { return hGDim.h - y(d[1]); })
										.attr('fill', barColor)
										.on("mouseover", mouseover)// mouseover is defined below.
										.on("mouseout", mouseout);// mouseout is defined below.

									//Create the frequency labels above the rectangles.
									bars.append("text").text(function (d) { return d3.format(",")(d[1]) })
										.attr("x", function (d) { return x(d[0]) + x.rangeBand() / 2; })
										.attr("y", function (d) { return y(d[1]) - 5; })
										.attr("text-anchor", "middle");

									function mouseover(d) {  // utility function to be called on mouseover.
										// filter for selected state.
										var st = fData.filter(function (s) { return s.State == d[0]; })[0],
											nD = d3.keys(st.freq).map(function (s) { return { type: s, freq: st.freq[s] }; });

										// call update functions of pie-chart and legend.    
										pC.update(nD);
										leg.update(nD);
									}

									function mouseout(d) {    // utility function to be called on mouseout.
										// reset the pie-chart and legend.    
										pC.update(tF);
										leg.update(tF);
									}

									// create function to update the bars. This will be used by pie-chart.
									hG.update = function (nD, color) {
										// update the domain of the y-axis map to reflect change in frequencies.
										y.domain([0, d3.max(nD, function (d) { return d[1]; })]);

										// Attach the new data to the bars.
										var bars = hGsvg.selectAll(".bar").data(nD);

										// transition the height and color of rectangles.
										bars.select("rect").transition().duration(500)
											.attr("y", function (d) { return y(d[1]); })
											.attr("height", function (d) { return hGDim.h - y(d[1]); })
											.attr("fill", color);

										// transition the frequency labels location and change value.
										bars.select("text").transition().duration(500)
											.text(function (d) { return d3.format(",")(d[1]) })
											.attr("y", function (d) { return y(d[1]) - 5; });
									}
									return hG;
								}

								// function to handle pieChart.
								function pieChart(pD) {
									var pC = {}, pieDim = { w: 250, h: 250 };
									pieDim.r = Math.min(pieDim.w, pieDim.h) / 2;

									// create svg for pie chart.
									var piesvg = d3.select(id).append("svg")
										.attr("width", pieDim.w).attr("height", pieDim.h).append("g")
										.attr("transform", "translate(" + pieDim.w / 2 + "," + pieDim.h / 2 + ")");

									// create function to draw the arcs of the pie slices.
									var arc = d3.svg.arc().outerRadius(pieDim.r - 10).innerRadius(0);

									// create a function to compute the pie slice angles.
									var pie = d3.layout.pie().sort(null).value(function (d) { return d.freq; });

									// Draw the pie slices.
									piesvg.selectAll("path").data(pie(pD)).enter().append("path").attr("d", arc)
										.each(function (d) { this._current = d; })
										.style("fill", function (d) { return segColor(d.data.type); })
										.on("mouseover", mouseover).on("mouseout", mouseout);

									// create function to update pie-chart. This will be used by histogram.
									pC.update = function (nD) {
										piesvg.selectAll("path").data(pie(nD)).transition().duration(500)
											.attrTween("d", arcTween);
									}
									// Utility function to be called on mouseover a pie slice.
									function mouseover(d) {
										// call the update function of histogram with new data.
										hG.update(fData.map(function (v) {
											return [v.State, v.freq[d.data.type]];
										}), segColor(d.data.type));
									}
									//Utility function to be called on mouseout a pie slice.
									function mouseout(d) {
										// call the update function of histogram with all data.
										hG.update(fData.map(function (v) {
											return [v.State, v.total];										
}), barColor);
									}
									// Animating the pie-slice requiring a custom function which specifies
									// how the intermediate paths should be drawn.
									function arcTween(a) {
										var i = d3.interpolate(this._current, a);
										this._current = i(0);
										return function (t) { return arc(i(t)); };
									}
									return pC;
								}

								// function to handle legend.
								function legend(lD) {
									var leg = {};

									// create table for legend.
									var legend = d3.select(id).append("table").attr('class', 'legend');

									// create one row per segment.
									var tr = legend.append("tbody").selectAll("tr").data(lD).enter().append("tr");

									// create the first column for each segment.
									tr.append("td").append("svg").attr("width", '16').attr("height", '16').append("rect")
										.attr("width", '16').attr("height", '16')
										.attr("fill", function (d) { return segColor(d.type); });

									// create the second column for each segment.
									tr.append("td").text(function (d) { return d.type; });

									// create the third column for each segment.
									tr.append("td").attr("class", 'legendFreq')
										.text(function (d) { return d3.format(",")(d.freq); });

									// create the fourth column for each segment.
									tr.append("td").attr("class", 'legendPerc')
										.text(function (d) { return getLegend(d, lD); });

									// Utility function to be used to update the legend.
									leg.update = function (nD) {
										// update the data attached to the row elements.
										var l = legend.select("tbody").selectAll("tr").data(nD);

										// update the frequencies.
										l.select(".legendFreq").text(function (d) { return d3.format(",")(d.freq); });

										// update the percentage column.
										l.select(".legendPerc").text(function (d) { return getLegend(d, nD); });
									}

									function getLegend(d, aD) { // Utility function to compute percentage.
										return d3.format("%")(d.freq / d3.sum(aD.map(function (v) { return v.freq; })));
									}

									return leg;
								}

								// calculate total frequency by segment for all state.
								var tF = ['low', 'mid', 'high'].map(function (d) {
									return { type: d, freq: d3.sum(fData.map(function (t) { return t.freq[d]; })) };
								});

								// calculate total frequency by state for all segment.
								var sF = fData.map(function (d) { return [d.State, d.total]; });

								var hG = histoGram(sF), // create the histogram.
									pC = pieChart(tF), // create the pie-chart.
									leg = legend(tF);  // create the legend.
							}

				</script>

				<script>
					var freqData = [
						{ State: 'AL', freq: { low: 4786, mid: 1319, high: 249 } }
						, { State: 'AZ', freq: { low: 1101, mid: 412, high: 674 } }
						, { State: 'CT', freq: { low: 932, mid: 2149, high: 418 } }
						, { State: 'DE', freq: { low: 832, mid: 1152, high: 1862 } }
						, { State: 'FL', freq: { low: 4481, mid: 3304, high: 948 } }
						, { State: 'GA', freq: { low: 1619, mid: 167, high: 1063 } }
						, { State: 'IA', freq: { low: 1819, mid: 247, high: 1203 } }
						, { State: 'IL', freq: { low: 4498, mid: 3852, high: 942 } }
						, { State: 'IN', freq: { low: 797, mid: 1849, high: 1534 } }
						, { State: 'KS', freq: { low: 162, mid: 379, high: 471 } }
					];

					dashboard('#dashboard', freqData);

				</script>
<!-- D3.JS Graph -->
				</div>
				</section>
				
		<!-- Footer -->
			<section id="footer">
				<ul class="icons">
					<li><a href="https://github.com/laochanlam/Refugee-Statistics" class="icon fa-github"><span class="label">GitHub</span></a></li>
				</ul>
				<div class="copyright">
					<ul class="menu">
						<li>HONG DE YUNG<br><br>F74044020</li><li>LAO CHON LAM<br><br>F74045034</li>

					</ul>
				</div>
			</section>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
